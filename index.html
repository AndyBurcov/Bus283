<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–≤—Ç–æ–±—É—Å 283</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#bb86fc">

    <style>
        :root { --bg: #121212; --card: #1e1e1e; --text: #e0e0e0; --accent: #bb86fc; --border: #333; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; padding-bottom: 50px; }
        .container { max-width: 600px; margin: auto; background: var(--card); border-radius: 12px; overflow: hidden; }
        header { background: #252525; padding: 25px 15px; text-align: center; border-bottom: 2px solid var(--accent); }
        h1 { margin: 0; font-size: 2.2rem; font-style: italic; text-transform: uppercase; letter-spacing: 2px; color: white; margin-bottom: 20px; }
        .quote-box { display: inline-block; background: #2a2a2a; padding: 15px 25px; border-radius: 40px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.6); border: 1px solid #444; max-width: 85%; }
        #bible-quote { font-style: italic; font-weight: bold; font-size: 0.95rem; color: white; margin: 0; line-height: 1.5; }
        #timer-block { background: #2a2a2a; padding: 15px; text-align: center; display: none; border-bottom: 1px solid var(--border); }
        #countdown { font-size: 1.6rem; color: var(--accent); font-weight: bold; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px 5px; text-align: center; border-bottom: 1px solid var(--border); border-right: 1px solid var(--border); font-size: 0.85rem; }
        td { cursor: pointer; }
        .selected { background: #3700b3 !important; }
        
        /* –°—Ç–∏–ª—ñ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Ä–æ–∑–∫–ª–∞–¥—É —Ç–∞ –∫–Ω–æ–ø–∫–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è */
        .btn-cal, .btn-install { 
            display: block; margin: 10px auto; padding: 12px 20px; 
            background: var(--accent); color: #000; border: none; 
            border-radius: 8px; font-weight: bold; cursor: pointer; 
        }
        .btn-cal { display: none; }

        .pwa-info-box {
            margin: 20px auto;
            max-width: 580px;
            background: #2a2a2a;
            border: 1px solid var(--accent);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .pwa-info-box p { margin: 0 0 15px 0; font-size: 0.95rem; color: white; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>–ê–í–¢–û–ë–£–° 283</h1>
        <div class="quote-box">
            <div id="bible-quote">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
        </div>
    </header>
    <div id="timer-block">
        <span id="countdown">00:00:00</span>
        <button class="btn-cal" id="calBtn" onclick="addToCalendar()">üìÖ –ù–∞–≥–∞–¥–∞—Ç–∏ –≤ –ö–∞–ª–µ–Ω–¥–∞—Ä—ñ</button>
    </div>
    <table>
        <thead><tr><th>–ü–Ω ‚Äî –ü—Ç</th><th>–°—É–±–æ—Ç–∞</th><th>–ù–µ–¥—ñ–ª—è</th></tr></thead>
        <tbody>
            <tr><td onclick="selectTrip('06:00', this)">06:00 ‚ûî 06:30</td><td onclick="selectTrip('06:00', this)">06:00 ‚ûî 06:40</td><td onclick="selectTrip('06:30', this)">06:30 ‚ûî 07:10</td></tr>
            <tr><td onclick="selectTrip('06:30', this)">06:30 ‚ûî 07:10</td><td onclick="selectTrip('06:50', this)">06:50 ‚ûî 07:30</td><td onclick="selectTrip('07:30', this)">07:30 ‚ûî 08:10</td></tr>
            <tr><td onclick="selectTrip('07:00', this)">07:00 ‚ûî 07:40</td><td onclick="selectTrip('07:50', this)">07:50 ‚ûî 08:30</td><td onclick="selectTrip('08:50', this)">08:50 ‚ûî 09:30</td></tr>
            <tr><td onclick="selectTrip('07:40', this)">07:40 ‚ûî 08:20</td><td onclick="selectTrip('08:50', this)">08:50 ‚ûî 09:30</td><td onclick="selectTrip('10:30', this)">10:30 ‚ûî 11:30</td></tr>
            <tr><td onclick="selectTrip('08:10', this)">08:10 ‚ûî 08:45</td><td onclick="selectTrip('09:40', this)">09:40 ‚ûî 10:30</td><td onclick="selectTrip('12:30', this)">12:30 ‚ûî 13:30</td></tr>
            <tr><td onclick="selectTrip('09:00', this)">09:00 ‚ûî 09:40</td><td onclick="selectTrip('10:30', this)">10:30 ‚ûî 11:30</td><td onclick="selectTrip('14:30', this)">14:30 ‚ûî 15:30</td></tr>
            <tr><td onclick="selectTrip('10:30', this)">10:30 ‚ûî 11:00</td><td onclick="selectTrip('11:30', this)">11:30 ‚ûî 12:30</td><td onclick="selectTrip('16:40', this)">16:40 ‚ûî 17:20</td></tr>
            <tr><td onclick="selectTrip('12:00', this)">12:00 ‚ûî 12:30</td><td onclick="selectTrip('12:30', this)">12:30 ‚ûî 13:30</td><td onclick="selectTrip('18:00', this)">18:00 ‚ûî 18:40</td></tr>
            <tr><td onclick="selectTrip('13:30', this)">13:30 ‚ûî 14:00</td><td onclick="selectTrip('13:30', this)">13:30 ‚ûî 14:30</td><td onclick="selectTrip('19:40', this)">19:40 ‚ûî 20:10</td></tr>
            <tr><td onclick="selectTrip('14:30', this)">14:30 ‚ûî 15:00</td><td onclick="selectTrip('14:30', this)">14:30 ‚ûî 15:30</td><td>-</td></tr>
            <tr><td onclick="selectTrip('15:30', this)">15:30 ‚ûî 16:00</td><td onclick="selectTrip('15:30', this)">15:30 ‚ûî 16:10</td><td>-</td></tr>
            <tr><td onclick="selectTrip('16:30', this)">16:30 ‚ûî 17:00</td><td onclick="selectTrip('16:40', this)">16:40 ‚ûî 17:20</td><td>-</td></tr>
            <tr><td onclick="selectTrip('17:30', this)">17:30 ‚ûî 18:00</td><td onclick="selectTrip('18:00', this)">18:00 ‚ûî 18:40</td><td>-</td></tr>
            <tr><td onclick="selectTrip('18:00', this)">18:00 ‚ûî 18:30</td><td onclick="selectTrip('19:40', this)">19:40 ‚ûî 20:10</td><td>-</td></tr>
            <tr><td onclick="selectTrip('19:40', this)">19:40 ‚ûî 20:10</td><td>-</td><td>-</td></tr>
        </tbody>
    </table>
</div>

<div class="pwa-info-box">
    <p>üì± –í—ñ–¥–∫—Ä–∏–≤–∞–π—Ç–µ —Ä–æ–∑–∫–ª–∞–¥ –º–∏—Ç—Ç—î–≤–æ –∑ —Ä–æ–±–æ—á–æ–≥–æ —Å—Ç–æ–ª—É:</p>
    <button class="btn-install" id="installBtn">–ó–ë–ï–†–ï–ì–¢–ò –Ø–ö –Ø–†–õ–ò–ö</button>
</div>

<script>
    // –ö–æ–¥ –¥–ª—è —Ü–∏—Ç–∞—Ç
    const bibleVerses = ["¬´–ü—Ä–æ–º–æ–≤–ª—è—î –¥–æ –Ω—å–æ–≥–æ –Ü—Å—É—Å: –Ø ‚Äî –¥–æ—Ä–æ–≥–∞, —ñ –ø—Ä–∞–≤–¥–∞, —ñ –∂–∏—Ç—Ç—è...¬ª (–Ü–≤–∞–Ω–∞ 14:6)", "¬´–Ü –Ω–µ–º–∞ –Ω—ñ –≤ –∫—ñ–º —ñ–Ω—à—ñ–º —Å–ø–∞—Å—ñ–Ω–Ω—è...¬ª (–î—ñ—ó 4:12)", "¬´–ë–æ —Ç–∞–∫ –ø–æ–ª—é–±–∏–≤ –ë–æ–≥ —Å–≤—ñ—Ç...¬ª (–Ü–≤–∞–Ω–∞ 3:16)", "¬´–ë–æ –∑–∞–ø–ª–∞—Ç–∞ –∑–∞ –≥—Ä—ñ—Ö ‚Äî —Å–º–µ—Ä—Ç—å...¬ª (–†–∏–º–ª—è–Ω 6:23)", "¬´–ë–æ –∫–æ–ª–∏ —Ç–∏ —É—Å—Ç–∞–º–∏ —Å–≤–æ—ó–º–∏ –≤–∏–∑–Ω–∞–≤–∞—Ç–∏–º–µ—à –Ü—Å—É—Å–∞...¬ª (–†–∏–º–ª—è–Ω 10:9)"];
    window.onload = () => { document.getElementById('bible-quote').innerText = bibleVerses[Math.floor(Math.random() * bibleVerses.length)]; };

    // –ö–æ–¥ –¥–ª—è —Ç–∞–π–º–µ—Ä–∞ —Ç–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
    let activeTime = "";
    function selectTrip(time, el) {
        activeTime = time;
        document.querySelectorAll('td').forEach(t => t.classList.remove('selected'));
        el.classList.add('selected');
        document.getElementById('timer-block').style.display = 'block';
        document.getElementById('calBtn').style.display = 'inline-block';
        updateTimer(time);
    }
    function updateTimer(time) {
        const [h, m] = time.split(':');
        let target = new Date(); target.setHours(parseInt(h), parseInt(m), 0);
        if (target < new Date()) target.setDate(target.getDate() + 1);
        if (window.tInt) clearInterval(window.tInt);
        window.tInt = setInterval(() => {
            const diff = target - new Date();
            if (diff <= 0) { clearInterval(window.tInt); alert("–ß–∞—Å –Ω–∞ –≤–∏—Ö—ñ–¥!"); return; }
            const hrs = Math.floor(diff/3600000).toString().padStart(2,'0');
            const mns = Math.floor((diff%3600000)/60000).toString().padStart(2,'0');
            const scs = Math.floor((diff%60000)/1000).toString().padStart(2,'0');
            document.getElementById('countdown').innerText = `${hrs}:${mns}:${scs}`;
        }, 1000);
    }
    function addToCalendar() {
        const [h, m] = activeTime.split(':');
        const start = new Date(); start.setHours(h, m);
        const end = new Date(start.getTime() + 20*60000);
        const fmt = (d) => d.toISOString().replace(/-|:|\.\d\d\d/g, "");
        window.open(`data:text/calendar;charset=utf8,BEGIN:VCALENDAR%0AVERSION:2.0%0ABEGIN:VEVENT%0ADTSTART:${fmt(start)}%0ADTEND:${fmt(end)}%0ASUMMARY:–ê–≤—Ç–æ–±—É—Å 283%0AEND:VEVENT%0AEND:VCALENDAR`);
    }

    // --- –õ–û–ì–Ü–ö–ê –ö–ù–û–ü–ö–ò –í–°–¢–ê–ù–û–í–õ–ï–ù–ù–Ø ---
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
    });

    document.getElementById('installBtn').addEventListener('click', async () => {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            if (outcome === 'accepted') deferredPrompt = null;
        } else {
            // –Ø–∫—â–æ –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –∞–≤—Ç–æ-–≤–∏–∫–ª–∏–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ iPhone –∞–±–æ Safari)
            alert("–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É '–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è' (–≤–Ω–∏–∑—É –µ–∫—Ä–∞–Ω–∞) —Ç–∞ –æ–±–µ—Ä—ñ—Ç—å '–î–æ–¥–∞—Ç–∏ –Ω–∞ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –µ–∫—Ä–∞–Ω'.");
        }
    });
</script>
</body>
</html>
